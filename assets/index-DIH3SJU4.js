const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/resolveImplementation-DR6t56_a.js","assets/index-CUaBoBtD.js","assets/index-XuV-OMpf.css","assets/extractIPFS-C2DlIsMF.js","assets/getInstalledModules-DtsLi9hV.js","assets/eth_estimateGas-D35SCROc.js","assets/eth_getTransactionCount-C8MGy8Bo.js","assets/send-gasless-transaction-JDxRgPYC.js","assets/decimals-DzEcqPLB.js","assets/signing-DI0PEnLR.js","assets/in-app-wallet-calls-BqbZ3JwA.js"])))=>i.map(i=>d[i]);
import{B as x,s as I,a as z,I as Vt,i as ge,h as ar,b as or,c as cr,f as ur,u as Ht,_ as P,d as _e,w as jt,e as M,n as R,j as be,k as J,l as dr,p as X,m as lr,o as et,q as fr,r as Q,L as pr,t as E,v as se,x as Wt,y as L,z as vt,A as yr,C as Zt,D as mr,E as hr,F as Kt,G as $,H as tt,J as K,K as nt,M as gr,N as br,O as wr,P as Yt,Q as qt,R as xr,S as Ar,T as Pe,U as Pr}from"./index-CUaBoBtD.js";function vr(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Tt=/^tuple(?<array>(\[(\d*)\])*)$/;function ke(e){let t=e.type;if(Tt.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const i=e.components[s];t+=ke(i),s<n-1&&(t+=", ")}const r=vr(Tt,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,ke({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function ce(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=ke(s),r!==n-1&&(t+=", ")}return t}function Tr(e){var t;return e.type==="function"?`function ${e.name}(${ce(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${ce(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${ce(e.inputs)})`:e.type==="error"?`error ${e.name}(${ce(e.inputs)})`:e.type==="constructor"?`constructor(${ce(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function ne(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Ur(e.type);return`${e.name}(${Se(e.inputs,{includeName:t})})`}function Se(e,{includeName:t=!1}={}){return e?e.map(n=>$r(n,{includeName:t})).join(t?", ":","):""}function $r(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Se(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Xt extends x{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Se(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Jt extends x{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Er extends x{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Ir extends x{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${I(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class _r extends x{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Sr extends x{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Gr extends x{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Qt extends x{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class $t extends x{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Lr extends x{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${ne(t.abiItem)}\`, and`,`\`${n.type}\` in \`${ne(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Ve extends x{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Se(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class en extends x{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ne(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class Or extends x{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Br extends x{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class Fr extends x{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Ur extends x{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Cr extends x{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}class tn extends x{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}class nn extends x{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function S(e,{dir:t,size:n=32}={}){return typeof e=="string"?W(e,{dir:t,size:n}):Dr(e,{dir:t,size:n})}function W(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new nn({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Dr(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new nn({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=t==="right";r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}function rt(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Mr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Y(e,t={}){return typeof e=="number"||typeof e=="bigint"?v(e,t):typeof e=="string"?sn(e,t):typeof e=="boolean"?rn(e,t):U(e,t)}function rn(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(z(n,{size:t.size}),S(n,{size:t.size})):n}function U(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Mr[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(z(r,{size:t.size}),S(r,{dir:"right",size:t.size})):r}function v(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<a){const c=typeof e=="bigint"?"n":"";throw new Vt({max:i?`${i}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${e}${c}`})}const o=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?S(o,{size:r}):o}const Rr=new TextEncoder;function sn(e,t={}){const n=Rr.encode(e);return U(n,t)}const zr=new TextEncoder;function Z(e,t={}){return typeof e=="number"||typeof e=="bigint"?kr(e,t):typeof e=="boolean"?Nr(e,t):ge(e)?we(e,t):an(e,t)}function Nr(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(z(n,{size:t.size}),S(n,{size:t.size})):n}const C={zero:48,nine:57,A:65,F:70,a:97,f:102};function Et(e){if(e>=C.zero&&e<=C.nine)return e-C.zero;if(e>=C.A&&e<=C.F)return e-(C.A-10);if(e>=C.a&&e<=C.f)return e-(C.a-10)}function we(e,t={}){let n=e;t.size&&(z(n,{size:t.size}),n=S(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let a=0,o=0;a<s;a++){const c=Et(r.charCodeAt(o++)),u=Et(r.charCodeAt(o++));if(c===void 0||u===void 0)throw new x(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[a]=c*16+u}return i}function kr(e,t){const n=v(e,t);return we(n)}function an(e,t={}){const n=zr.encode(e);return typeof t.size=="number"?(z(n,{size:t.size}),S(n,{dir:"right",size:t.size})):n}const Ae=BigInt(2**32-1),It=BigInt(32);function Vr(e,t=!1){return t?{h:Number(e&Ae),l:Number(e>>It&Ae)}:{h:Number(e>>It&Ae)|0,l:Number(e&Ae)|0}}function Hr(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:a,l:o}=Vr(e[i],t);[r[i],s[i]]=[a,o]}return[r,s]}const jr=(e,t,n)=>e<<n|t>>>32-n,Wr=(e,t,n)=>t<<n|e>>>32-n,Zr=(e,t,n)=>t<<n-32|e>>>64-n,Kr=(e,t,n)=>e<<n-32|t>>>64-n;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Yr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function _t(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function pe(e,...t){if(!Yr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ve(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function on(e,t){pe(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qr(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function ye(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Fe(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function F(e,t){return e<<32-t|e>>>t}const Xr=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Jr(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Qr(e){for(let t=0;t<e.length;t++)e[t]=Jr(e[t]);return e}const St=Xr?e=>e:Qr;function es(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function st(e){return typeof e=="string"&&(e=es(e)),pe(e),e}class cn{}function un(e){const t=r=>e().update(st(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const ts=BigInt(0),ue=BigInt(1),ns=BigInt(2),rs=BigInt(7),ss=BigInt(256),is=BigInt(113),dn=[],ln=[],fn=[];for(let e=0,t=ue,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],dn.push(2*(5*r+n)),ln.push((e+1)*(e+2)/2%64);let s=ts;for(let i=0;i<7;i++)t=(t<<ue^(t>>rs)*is)%ss,t&ns&&(s^=ue<<(ue<<BigInt(i))-ue);fn.push(s)}const pn=Hr(fn,!0),as=pn[0],os=pn[1],Gt=(e,t,n)=>n>32?Zr(e,t,n):jr(e,t,n),Lt=(e,t,n)=>n>32?Kr(e,t,n):Wr(e,t,n);function cs(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=n[c],d=n[c+1],l=Gt(u,d,1)^n[o],f=Lt(u,d,1)^n[o+1];for(let p=0;p<50;p+=10)e[a+p]^=l,e[a+p+1]^=f}let s=e[2],i=e[3];for(let a=0;a<24;a++){const o=ln[a],c=Gt(s,i,o),u=Lt(s,i,o),d=dn[a];s=e[d],i=e[d+1],e[d]=c,e[d+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)n[o]=e[a+o];for(let o=0;o<10;o++)e[a+o]^=~n[(o+2)%10]&n[(o+4)%10]}e[0]^=as[r],e[1]^=os[r]}ye(n)}class it extends cn{constructor(t,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,_t(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qr(this.state)}clone(){return this._cloneInto()}keccak(){St(this.state32),cs(this.state32,this.rounds),St(this.state32),this.posOut=0,this.pos=0}update(t){ve(this),t=st(t),pe(t);const{blockLen:n,state:r}=this,s=t.length;for(let i=0;i<s;){const a=Math.min(n-this.pos,s-i);for(let o=0;o<a;o++)r[this.pos++]^=t[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){ve(this,!1),pe(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,i-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return _t(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(on(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ye(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:a}=this;return t||(t=new it(n,r,s,a,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const us=(e,t,n)=>un(()=>new it(t,e,n)),ds=us(1,136,256/8);function Ge(e,t){const n=t||"hex",r=ds(ge(e,{strict:!1})?Z(e):e);return n==="bytes"?r:Y(r)}const ls=e=>Ge(Z(e));function fs(e){return ls(e)}function ps(e){let t=!0,n="",r=0,s="",i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),o==="("&&r++,o===")"&&r--,!!t){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=o,n+=o}}if(!i)throw new x("Unable to normalize signature.");return s}const ys=e=>{const t=typeof e=="string"?e:Tr(e);return ps(t)};function at(e){return fs(ys(e))}const Le=at;class He extends x{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class yn extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Ue=new yn(8192);function mn(e,t){if(Ue.has(`${e}.${t}`))return Ue.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=Ge(an(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const i=`0x${s.join("")}`;return Ue.set(`${e}.${t}`,i),i}const ms=/^0x[a-fA-F0-9]{40}$/,Ce=new yn(8192);function re(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ce.has(r))return Ce.get(r);const s=ms.test(e)?e.toLowerCase()===e?!0:n?mn(e)===e:!0:!1;return Ce.set(r,s),s}function O(e){return typeof e[0]=="string"?gs(e):hs(e)}function hs(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function gs(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Te(e,t,n,{strict:r}={}){return ge(e,{strict:!1})?bs(e,t,n,{strict:r}):bn(e,t,n,{strict:r})}function hn(e,t){if(typeof t=="number"&&t>0&&t>I(e)-1)throw new tn({offset:t,position:"start",size:I(e)})}function gn(e,t,n){if(typeof t=="number"&&typeof n=="number"&&I(e)!==n-t)throw new tn({offset:n,position:"end",size:I(e)})}function bn(e,t,n,{strict:r}={}){hn(e,t);const s=e.slice(t,n);return r&&gn(s,t,n),s}function bs(e,t,n,{strict:r}={}){hn(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&gn(s,t,n),s}const ws=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function xs(e,t){if(e.length!==t.length)throw new _r({expectedLength:e.length,givenLength:t.length});const n=As({params:e,values:t}),r=ct(n);return r.length===0?"0x":r}function As({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(ot({param:e[r],value:t[r]}));return n}function ot({param:e,value:t}){const n=ut(e.type);if(n){const[r,s]=n;return vs(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return _s(t,{param:e});if(e.type==="address")return Ps(t);if(e.type==="bool")return $s(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=ws.exec(e.type)??[];return Es(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return Ts(t,{param:e});if(e.type==="string")return Is(t);throw new Or(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ct(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=I(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(v(t+s,{size:32})),r.push(o),s+=I(o)):n.push(o)}return O([...n,...r])}function Ps(e){if(!re(e))throw new He({address:e});return{dynamic:!1,encoded:W(e.toLowerCase())}}function vs(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Fr(e);if(!r&&e.length!==t)throw new Er({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=ot({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=ct(i);if(r){const o=v(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?O([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:O(i.map(({encoded:a})=>a))}}function Ts(e,{param:t}){const[,n]=t.type.split("bytes"),r=I(e);if(!n){let s=e;return r%32!==0&&(s=W(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:O([W(v(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new Ir({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:W(e,{dir:"right"})}}function $s(e){if(typeof e!="boolean")throw new x(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:W(rn(e))}}function Es(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Vt({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:v(e,{size:32,signed:t})}}function Is(e){const t=sn(e),n=Math.ceil(I(t)/32),r=[];for(let s=0;s<n;s++)r.push(W(Te(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:O([W(v(I(t),{size:32})),...r])}}function _s(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=ot({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?ct(r):O(r.map(({encoded:s})=>s))}}function ut(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const dt=e=>Te(at(e),0,4);function Ss(e){const{abi:t,args:n=[],name:r}=e,s=ge(r,{strict:!1}),i=t.filter(o=>s?o.type==="function"?dt(o)===r:o.type==="event"?Le(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((u,d)=>{const l="inputs"in o&&o.inputs[d];return l?je(u,l):!1})){if(a&&"inputs"in a&&a.inputs){const u=wn(o.inputs,a.inputs,n);if(u)throw new Lr({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||i[0]}function je(e,t){const n=typeof e,r=t.type;switch(r){case"address":return re(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>je(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>je(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wn(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return wn(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?re(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?re(n[r],{strict:!1}):!1)return a}}const Ot="/docs/contract/encodeEventTopics";function Gs(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=Ss({abi:t,name:n});if(!u)throw new $t(n,{docsPath:Ot});s=u}if(s.type!=="event")throw new $t(void 0,{docsPath:Ot});const i=ne(s),a=Le(i);let o=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(l=>"indexed"in l&&l.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(l=>r[l.name]))??[]:[];d.length>0&&(o=(u==null?void 0:u.map((l,f)=>Array.isArray(d[f])?d[f].map((p,h)=>Bt({param:l,value:d[f][h]})):typeof d[f]<"u"&&d[f]!==null?Bt({param:l,value:d[f]}):null))??[])}return[a,...o]}function Bt({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ge(Z(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Cr(e.type);return xs([e],[t])}const Ls={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Os={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Ft extends x{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class xn extends x{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class Bs extends x{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Fs={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Bs({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new xn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Ft({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Ft({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function An(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Fs);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Us(e,t={}){typeof t.size<"u"&&z(e,{size:t.size});const n=U(e,t);return cr(n,t)}function Cs(e,t={}){let n=e;if(typeof t.size<"u"&&(z(n,{size:t.size}),n=rt(n)),n.length>1||n[0]>1)throw new or(n);return!!n[0]}function D(e,t={}){typeof t.size<"u"&&z(e,{size:t.size});const n=U(e,t);return ar(n,t)}function Ds(e,t={}){let n=e;return typeof t.size<"u"&&(z(n,{size:t.size}),n=rt(n,{dir:"right"})),new TextDecoder().decode(n)}function Oe(e,t){const n=typeof t=="string"?we(t):t,r=An(n);if(I(n)===0&&e.length>0)throw new Jt;if(I(t)&&I(t)<32)throw new Xt({data:typeof t=="string"?t:U(t),params:e,size:I(t)});let s=0;const i=[];for(let a=0;a<e.length;++a){const o=e[a];r.setPosition(s);const[c,u]=te(r,o,{staticPosition:0});s+=u,i.push(c)}return i}function te(e,t,{staticPosition:n}){const r=ut(t.type);if(r){const[s,i]=r;return Rs(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return Vs(e,t,{staticPosition:n});if(t.type==="address")return Ms(e);if(t.type==="bool")return zs(e);if(t.type.startsWith("bytes"))return Ns(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return ks(e,t);if(t.type==="string")return Hs(e,{staticPosition:n});throw new Br(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ut=32,We=32;function Ms(e){const t=e.readBytes(32);return[mn(U(bn(t,-20))),32]}function Rs(e,t,{length:n,staticPosition:r}){if(!n){const a=D(e.readBytes(We)),o=r+a,c=o+Ut;e.setPosition(o);const u=D(e.readBytes(Ut)),d=me(t);let l=0;const f=[];for(let p=0;p<u;++p){e.setPosition(c+(d?p*32:l));const[h,m]=te(e,t,{staticPosition:c});l+=m,f.push(h)}return e.setPosition(r+32),[f,32]}if(me(t)){const a=D(e.readBytes(We)),o=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(o+u*32);const[d]=te(e,t,{staticPosition:o});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=te(e,t,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function zs(e){return[Cs(e.readBytes(32),{size:32}),32]}function Ns(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=D(e.readBytes(32));e.setPosition(n+a);const o=D(e.readBytes(32));if(o===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(o);return e.setPosition(n+32),[U(c),32]}return[U(e.readBytes(Number.parseInt(s,10),32)),32]}function ks(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Us(s,{signed:n}):D(s,{signed:n}),32]}function Vs(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(me(t)){const a=D(e.readBytes(We)),o=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(o+i);const[d,l]=te(e,u,{staticPosition:o});i+=l,s[r?c:u==null?void 0:u.name]=d}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const o=t.components[a],[c,u]=te(e,o,{staticPosition:n});s[r?a:o==null?void 0:o.name]=c,i+=u}return[s,i]}function Hs(e,{staticPosition:t}){const n=D(e.readBytes(32)),r=t+n;e.setPosition(r);const s=D(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),a=Ds(rt(i));return e.setPosition(t+32),[a,32]}function me(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(me);const n=ut(e.type);return!!(n&&me({...e,type:n[1]}))}function Pn(e){const{abi:t,data:n}=e,r=Te(n,0,4);if(r==="0x")throw new Jt;const i=[...t||[],Ls,Os].find(a=>a.type==="error"&&r===dt(ne(a)));if(!i)throw new Sr(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Oe(i.inputs,Te(n,4)):void 0,errorName:i.name}}const js=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Ws(e,t="hex"){const n=vn(e),r=An(new Uint8Array(n.length));return n.encode(r),t==="hex"?U(r.bytes):r.bytes}function vn(e){return Array.isArray(e)?Zs(e.map(t=>vn(t))):Ks(e)}function Zs(e){const t=e.reduce((s,i)=>s+i.length,0),n=Tn(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function Ks(e){const t=typeof e=="string"?we(e):e,n=Tn(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Tn(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new x("Length is too large.")}const Ys={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function qs(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=Xs(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>U(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=v(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=v(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=v(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=v(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=v(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=v(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=Ys[e.type]),typeof e.value<"u"&&(n.value=v(e.value)),n}function Xs(e){return e.map(t=>({address:t.address,r:t.r?v(BigInt(t.r)):t.r,s:t.s?v(BigInt(t.s)):t.s,chainId:v(t.chainId),nonce:v(t.nonce),...typeof t.yParity<"u"?{yParity:v(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:v(t.v)}:{}}))}const Js=2n**16n-1n;function Qs(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:ur(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function ei(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}function ti(e,t,n){return e&t^~e&n}function ni(e,t,n){return e&t^e&n^t&n}class ri extends cn{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Fe(this.buffer)}update(t){ve(this),t=st(t),pe(t);const{view:n,buffer:r,blockLen:s}=this,i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Fe(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ve(this),on(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,ye(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let l=a;l<s;l++)n[l]=0;ei(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Fe(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,d[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.destroyed=a,t.finished=i,t.length=s,t.pos=o,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const V=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),si=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),H=new Uint32Array(64);class ii extends ri{constructor(t=32){super(64,t,8,!1),this.A=V[0]|0,this.B=V[1]|0,this.C=V[2]|0,this.D=V[3]|0,this.E=V[4]|0,this.F=V[5]|0,this.G=V[6]|0,this.H=V[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)H[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const f=H[l-15],p=H[l-2],h=F(f,7)^F(f,18)^f>>>3,m=F(p,17)^F(p,19)^p>>>10;H[l]=m+H[l-7]+h+H[l-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const f=F(o,6)^F(o,11)^F(o,25),p=d+f+ti(o,c,u)+si[l]+H[l]|0,m=(F(r,2)^F(r,13)^F(r,22))+ni(r,s,i)|0;d=u,u=c,c=o,o=a+p|0,a=i,i=s,s=r,r=p+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,c,u,d)}roundClean(){ye(H)}destroy(){this.set(0,0,0,0,0,0,0,0),ye(this.buffer)}}const ai=un(()=>new ii),oi=ai;function ci(e,t){const n=oi(ge(e,{strict:!1})?Z(e):e);return Y(n)}function ui(e,t){if(!re(e,{strict:!1}))throw new He({address:e});if(!re(t,{strict:!1}))throw new He({address:t});return e.toLowerCase()===t.toLowerCase()}const Ct="/docs/contract/decodeEventLog";function di(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[a,...o]=s;if(!a)throw new Gr({docsPath:Ct});const c=t.find(m=>m.type==="event"&&a===Le(ne(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Qt(a,{docsPath:Ct});const{name:u,inputs:d}=c,l=d==null?void 0:d.some(m=>!("name"in m&&m.name)),f=l?[]:{},p=d.map((m,b)=>[m,b]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<p.length;m++){const[b,w]=p[m],y=o[m];if(!y)throw new en({abiItem:c,param:b});f[l?w:b.name||w]=li({param:b,value:y})}const h=d.filter(m=>!("indexed"in m&&m.indexed));if(h.length>0){if(n&&n!=="0x")try{const m=Oe(h,n);if(m)if(l)for(let b=0;b<d.length;b++)f[b]=f[b]??m.shift();else for(let b=0;b<h.length;b++)f[h[b].name]=m[b]}catch(m){if(i)throw m instanceof Xt||m instanceof xn?new Ve({abiItem:c,data:n,params:h,size:I(n)}):m}else if(i)throw new Ve({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function li({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Oe([e],t)||[])[0]}function fi(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{var o;try{const c=t.find(d=>d.type==="event"&&a.topics[0]===Le(d));if(!c)return null;const u=di({...a,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!pi({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,d;if(c instanceof Qt)return null;if(c instanceof Ve||c instanceof en){if(s)return null;u=c.abiItem.name,d=(o=c.abiItem.inputs)==null?void 0:o.some(l=>!("name"in l&&l.name))}return{...a,args:d?[]:{},eventName:u}}}).filter(Boolean)}function pi(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,a,o){try{return i.type==="address"?ui(a,o):i.type==="string"||i.type==="bytes"?Ge(Z(a))===o:a===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,a)=>{if(i==null)return!0;const o=n[a];return o?(Array.isArray(i)?i:[i]).some(u=>s(o,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(a==null)return!0;const o=n.find(u=>u.name===i);return o?(Array.isArray(a)?a:[a]).some(u=>s(o,u,t[i])):!1}):!1}function yi(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const mi="1.0.8";class T extends Error{constructor(t,n={}){var a;const r=n.cause instanceof T?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,s=n.cause instanceof T&&n.cause.docsPath||n.docsPath,i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${mi}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}}function N(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const $n=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,En=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,In=/^\(.+?\).*?$/,Dt=/^tuple(?<array>(\[(\d*)\])*)$/;function Ze(e){let t=e.type;if(Dt.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const i=e.components[s];t+=Ze(i),s<n-1&&(t+=", ")}const r=N(Dt,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Ze({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function de(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Ze(s),r!==n-1&&(t+=", ")}return t}function hi(e){var t;return e.type==="function"?`function ${e.name}(${de(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${de(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${de(e.inputs)})`:e.type==="error"?`error ${e.name}(${de(e.inputs)})`:e.type==="constructor"?`constructor(${de(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function gi(e){const t=[],n=e.length;for(let r=0;r<n;r++){const s=e[r],i=hi(s);t.push(i)}return t}const _n=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function bi(e){return _n.test(e)}function wi(e){return N(_n,e)}const Sn=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function xi(e){return Sn.test(e)}function Ai(e){return N(Sn,e)}const Gn=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Pi(e){return Gn.test(e)}function vi(e){return N(Gn,e)}const Ln=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function lt(e){return Ln.test(e)}function Ti(e){return N(Ln,e)}const On=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function $i(e){return On.test(e)}function Ei(e){return N(On,e)}const Bn=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ii(e){return Bn.test(e)}function _i(e){return N(Bn,e)}const Si=/^receive\(\) external payable$/;function Gi(e){return Si.test(e)}const Li=new Set(["indexed"]),Ke=new Set(["calldata","memory","storage"]);class Oi extends T{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Bi extends T{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Fi extends T{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Ui extends T{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ci extends T{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Di extends T{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Mi extends T{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Ri extends T{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ie extends T{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class zi extends T{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Ni extends T{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class ki extends T{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Vi extends T{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Hi(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const a of s[1])i+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${s[0]}{${i}})`}return t?`${t}:${e}${r}`:e}const De=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Ye(e,t={}){if(Pi(e))return ji(e,t);if(xi(e))return Wi(e,t);if(bi(e))return Zi(e,t);if($i(e))return Ki(e,t);if(Ii(e))return Yi(e);if(Gi(e))return{type:"receive",stateMutability:"payable"};throw new zi({signature:e})}function ji(e,t={}){const n=vi(e);if(!n)throw new ie({signature:e,type:"function"});const r=G(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ee(r[o],{modifiers:Ke,structs:t,type:"function"}));const a=[];if(n.returns){const o=G(n.returns),c=o.length;for(let u=0;u<c;u++)a.push(ee(o[u],{modifiers:Ke,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}function Wi(e,t={}){const n=Ai(e);if(!n)throw new ie({signature:e,type:"event"});const r=G(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ee(r[a],{modifiers:Li,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Zi(e,t={}){const n=wi(e);if(!n)throw new ie({signature:e,type:"error"});const r=G(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ee(r[a],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Ki(e,t={}){const n=Ei(e);if(!n)throw new ie({signature:e,type:"constructor"});const r=G(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ee(r[a],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Yi(e){const t=_i(e);if(!t)throw new ie({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const qi=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Xi=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Ji=/^u?int$/;function ee(e,t){var l,f;const n=Hi(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(De.has(n))return De.get(n);const r=In.test(e),s=N(r?Xi:qi,e);if(!s)throw new Ui({param:e});if(s.name&&ea(s.name))throw new Ci({param:e,name:s.name});const i=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},o=(t==null?void 0:t.structs)??{};let c,u={};if(r){c="tuple";const p=G(s.type),h=[],m=p.length;for(let b=0;b<m;b++)h.push(ee(p[b],{structs:o}));u={components:h}}else if(s.type in o)c="tuple",u={components:o[s.type]};else if(Ji.test(s.type))c=`${s.type}256`;else if(c=s.type,(t==null?void 0:t.type)!=="struct"&&!Fn(c))throw new Fi({type:c});if(s.modifier){if(!((f=(l=t==null?void 0:t.modifiers)==null?void 0:l.has)!=null&&f.call(l,s.modifier)))throw new Di({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(Ke.has(s.modifier)&&!ta(c,!!s.array))throw new Mi({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...i,...a,...u};return De.set(n,d),d}function G(e,t=[],n="",r=0){const s=e.trim().length;for(let i=0;i<s;i++){const a=e[i],o=e.slice(i+1);switch(a){case",":return r===0?G(o,[...t,n.trim()]):G(o,t,`${n}${a}`,r);case"(":return G(o,t,`${n}${a}`,r+1);case")":return G(o,t,`${n}${a}`,r-1);default:return G(o,t,`${n}${a}`,r)}}if(n==="")return t;if(r!==0)throw new Vi({current:n,depth:r});return t.push(n.trim()),t}function Fn(e){return e==="address"||e==="bool"||e==="function"||e==="string"||$n.test(e)||En.test(e)}const Qi=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ea(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||$n.test(e)||En.test(e)||Qi.test(e)}function ta(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function Un(e){const t={},n=e.length;for(let a=0;a<n;a++){const o=e[a];if(!lt(o))continue;const c=Ti(o);if(!c)throw new ie({signature:o,type:"struct"});const u=c.properties.split(";"),d=[],l=u.length;for(let f=0;f<l;f++){const h=u[f].trim();if(!h)continue;const m=ee(h,{type:"struct"});d.push(m)}if(!d.length)throw new Ni({signature:o});t[c.name]=d}const r={},s=Object.entries(t),i=s.length;for(let a=0;a<i;a++){const[o,c]=s[a];r[o]=Cn(c,t)}return r}const na=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Cn(e,t,n=new Set){const r=[],s=e.length;for(let i=0;i<s;i++){const a=e[i];if(In.test(a.type))r.push(a);else{const c=N(na,a.type);if(!(c!=null&&c.type))throw new Ri({abiParameter:a});const{array:u,type:d}=c;if(d in t){if(n.has(d))throw new ki({type:d});r.push({...a,type:`tuple${u??""}`,components:Cn(t[d]??[],t,new Set([...n,d]))})}else if(Fn(d))r.push(a);else throw new Bi({type:d})}}return r}function ra(e){const t=Un(e),n=[],r=e.length;for(let s=0;s<r;s++){const i=e[s];lt(i)||n.push(Ye(i,t))}return n}function Be(e){let t;if(typeof e=="string")t=Ye(e);else{const n=Un(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(!lt(i)){t=Ye(i,n);break}}}if(!t)throw new Oi({signature:e});return t}const Mt=Js*32n;class sa extends x{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class ia extends x{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class aa extends x{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function oa(e){const t=Z(e);if(t.length%32!==0)throw new aa({givenLength:t.length});if(t.length>Mt)throw new sa({givenLength:t.length,maxBytecodeSize:Mt});const n=ci(t),r=Z(n),s=t.length/32;if(s%2===0)throw new ia({givenLengthInWords:s});const i=Z(s),a=S(i,{size:2}),o=new Uint8Array([1,0]);return r.set(o,0),r.set(a,2),r}const ca=yi({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0}),ua="https://{clientId}.ipfscdn.io/ipfs/{cid}";function da(e){var t,n;if(e.uri.startsWith("ipfs://")){const r=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??ua,s=e.client.clientId,i=la(e.uri);let a;return typeof globalThis<"u"&&"Application"in globalThis&&(a=globalThis.Application.applicationId),`${r.replace("{clientId}",s).split("/ipfs")[0]}/ipfs/${i}${a?`?bundleId=${a}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function la(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}function fa(e=32){return Ht(pa(e))}function pa(e=32){return globalThis.crypto.getRandomValues(new Uint8Array(e))}async function ya(e){var r,s,i,a,o,c,u,d,l;let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:f}=await P(async()=>{const{resolveArweaveScheme:p}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:p}},[]);t=f(e)}else t=da(e);const n=await _e(e.client)(t,{headers:(i=(s=(r=e.client.config)==null?void 0:r.storage)==null?void 0:s.fetch)==null?void 0:i.headers,keepalive:(c=(o=(a=e.client.config)==null?void 0:a.storage)==null?void 0:o.fetch)==null?void 0:c.keepalive,requestTimeoutMs:e.requestTimeoutMs??((l=(d=(u=e.client.config)==null?void 0:u.storage)==null?void 0:d.fetch)==null?void 0:l.requestTimeoutMs)??6e4});if(!n.ok){const f=await n.text();throw new Error(`Failed to download file: ${n.status} ${n.statusText} ${f||""}`)}return n}function ma(e,t="https://contract.thirdweb.com/abi"){return jt(async()=>{if(e.abi)return e.abi;if(e.chain.id===31337||e.chain.id===1337||e.chain.id===ca.id)return await Rt(e);try{return await ha(e,t)}catch{return await Rt(e)}},{cacheKey:`${e.chain.id}-${e.address}`,cacheTime:1e3*60*60*1})}async function ha(e,t="https://contract.thirdweb.com/abi"){const r=await(await _e(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!r||r.error)throw new Error(`Failed to resolve ABI from contract API. ${r.error||""}`);return r}async function Dn(e){const[{resolveImplementation:t},{extractIPFSUri:n}]=await Promise.all([P(()=>import("./resolveImplementation-DR6t56_a.js"),__vite__mapDeps([0,1,2])),P(()=>import("./extractIPFS-C2DlIsMF.js"),__vite__mapDeps([3,1,2]))]),{bytecode:r}=await t(e);if(r==="0x"){const{id:i,name:a}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${a||"Unknown Chain"} (chain id: ${i})]`)}const s=n(r);if(!s)return[];try{return(await(await ya({client:e.client,uri:s})).json()).output.abi}catch{return[]}}const ga={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},ba={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},wa={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function Rt(e,t,n){const[r,s,i,a,o]=await Promise.all([Dn(e),xa(e),Aa(e),Pa(e),va(e)]),c=[...new Set([...s,...i,...a,...o])];if(!c.length)return r;const u=await Ta({contract:e,plugins:c,resolveSubAbi:n});return $a({pluginAbis:u,rootAbi:r})}async function xa(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>ht);return{readContract:r}},void 0),n=await t({contract:e,method:ga});return n.length?[...new Set(n.map(r=>r.pluginAddress))]:[]}catch{}return[]}async function Aa(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>ht);return{readContract:r}},void 0),n=await t({contract:e,method:ba});return n.length?[...new Set(n.map(r=>r.metadata.implementation))]:[]}catch{}return[]}async function Pa(e){try{const{getInstalledModules:t}=await P(async()=>{const{getInstalledModules:r}=await import("./getInstalledModules-DtsLi9hV.js");return{getInstalledModules:r}},__vite__mapDeps([4,1,2])),n=await t({contract:e});return n.length?[...new Set(n.map(r=>r.implementation))]:[]}catch{}return[]}async function va(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>ht);return{readContract:r}},void 0),n=await t({contract:e,method:wa});return n.length?n.map(r=>r.facetAddress):[]}catch{}return[]}async function Ta(e){return Promise.all(e.plugins.map(t=>{const n=M({...e.contract,address:t});return e.resolveSubAbi?e.resolveSubAbi(n):Dn(n)}))}function $a(e){let t=e.pluginAbis.flat().filter(r=>r.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi,...t].filter(r=>r.type!=="fallback"&&r.type!=="receive").filter(Boolean));const n=[...new Set(gi(t))];return ra(n)}function Ea(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="event")}function Mn(e){const{signature:t}=e;let n;return Ea(t)?n=t:n=Be(t),{abiEvent:n,hash:at(n),topics:Gs({abi:[n],args:e.filters})}}function Ia(e){const{logs:t,events:n,strict:r}=e;return fi({abi:n.map(s=>s.abiEvent),logs:t,strict:r})}function _a(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{balance:n.balance?R(n.balance):void 0,code:n.code,nonce:n.nonce?R(n.nonce):void 0,state:n.state,stateDiff:n.stateDiff}]))}async function Sa(e,t){const{blockNumber:n,blockTag:r,...s}=t,a=(n?R(n):void 0)||r||"latest";return await e({method:"eth_call",params:t.stateOverrides?[s,a,_a(t.stateOverrides)]:[s,a]})}function he(e){return be(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function ft(e,t){if(e.length!==t.length)throw new Error("The number of parameters and values must match.");const n=Ga({params:e,values:t}),r=yt(n);return r.length===0?"0x":r}function Ga({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(pt({param:e[r],value:t[r]}));return n}function pt({param:e,value:t}){const n=Ma(e.type);if(n){const[r,s]=n;return Oa(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return Da(t,{param:e});if(e.type==="address")return La(t);if(e.type==="bool")return Fa(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return Ua(t,{signed:r})}if(e.type.startsWith("bytes"))return Ba(t,{param:e});if(e.type==="string")return Ca(t);throw new Error(`Unsupported parameter type: ${e.type}`)}function yt(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=he(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(R(t+s,{size:32})),r.push(o),s+=he(o)):n.push(o)}return J(...n,...r)}function La(e){if(e!==""&&e!==void 0&&!dr(e))throw new Error(`Invalid address: ${e}`);return{dynamic:!1,encoded:X(e.toLowerCase())}}function Oa(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Error("Invalid array value.");if(!r&&e.length!==t)throw new Error("Invalid array length.");let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=pt({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=yt(i);if(r){const o=R(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?J(o,a):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:J(...i.map(({encoded:a})=>a))}}function Ba(e,{param:t}){const[,n]=t.type.split("bytes"),r=he(e);if(!n){let s=e;return r%32!==0&&(s=X(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:J(X(R(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Error(`Invalid bytes${n} size: ${r}`);return{dynamic:!1,encoded:X(e,{dir:"right"})}}function Fa(e){return{dynamic:!1,encoded:X(lr(e))}}function Ua(e,{signed:t}){return{dynamic:!1,encoded:R(e,{signed:t,size:32})}}function Ca(e){const t=et(e),n=Math.ceil(he(t)/32),r=[];for(let s=0;s<n;s++)r.push(X(fr(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:J(X(R(he(t),{size:32})),...r)}}function Da(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=pt({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?yt(r):J(...r.map(({encoded:s})=>s))}}function Ma(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const Me=new pr(4096);function j(e){const t=typeof e=="string"?e:Q(e);if(Me.has(t))return Me.get(t);const n=typeof e=="string"?Be(e):e,s=[dt(n),n.inputs,n.outputs];return Me.set(t,s),s}async function Ra(e){const t=await e({method:"eth_gasPrice"});return E(t)}async function zt(e){const{client:t,chain:n,percentMultiplier:r}=e,s=se({chain:n,client:t}),i=await Ra(s),a=r?i/BigInt(100)*BigInt(r):0n;return i+a}async function za(e,t){const n=t.blockTag??"latest",r=t.includeTransactions??!1,s=t.blockNumber!==void 0?R(t.blockNumber):void 0,i=await e({method:"eth_getBlockByNumber",params:[s||n,r]});if(!i)throw new Error("Block not found");return Qs(i)}async function Na(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return E(t)}async function A(e){return typeof e=="function"?await e():e}function mt(e,t){e.includes("e")&&(e=Number(e).toFixed(t));let[n,r=""]=e.split(".");const s=n.startsWith("-")?"-":"";if(s&&(n=n.slice(1)),r=r.padEnd(t,"0"),t===0)r[0]&&Number.parseInt(r[0])>=5&&(n=(BigInt(n)+1n).toString()),r="";else if(r.length>t){const i=r[t];i&&Number.parseInt(i,10)>=5?(r=(BigInt(r.substring(0,t))+1n).toString().padStart(t,"0"),r.length>t&&(n=(BigInt(n)+1n).toString(),r=r.substring(r.length-t))):r=r.substring(0,t)}return BigInt(`${s}${n}${r}`)}function Rn(e){return mt(e,18)}function fe(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}const ka=[78600,2040,248,9372,841,842,2016,9768,2442,1942999413,1952959480,994873017,19011,40875,1511670449,5464,2020,2021,98866,1417429182];async function Va(e){var a;const[t,n,r,s]=await Promise.all([A(e.maxFeePerGas),A(e.maxPriorityFeePerGas),A(e.gasPrice),A(e.type)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(typeof r=="bigint")return{gasPrice:r};const i=await zn(e.client,e.chain,s==="legacy"?"legacy":"eip1559");return(a=e.chain.experimental)!=null&&a.increaseZeroByteCount?i.gasPrice?{gasPrice:fe(i.gasPrice)}:{maxFeePerGas:t??fe(i.maxFeePerGas??0n),maxPriorityFeePerGas:n??fe(i.maxPriorityFeePerGas??0n)}:i.gasPrice!==void 0?i:{maxFeePerGas:t??i.maxFeePerGas,maxPriorityFeePerGas:n??i.maxPriorityFeePerGas}}async function zn(e,t,n){if((n??t.feeType)==="legacy"||ka.includes(t.id))return{gasPrice:await zt({chain:t,client:e,percentMultiplier:10})};const s=await Ha(e,t);return s.maxFeePerGas!==null&&s.maxPriorityFeePerGas!==null?{maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas}:{gasPrice:await zt({chain:t,client:e,percentMultiplier:10})}}async function Ha(e,t,n=10){let r=null,s=null;const i=se({chain:t,client:e}),[a,o]=await Promise.all([za(i,{blockTag:"latest"}),Na(i).catch(()=>null)]),c=a==null?void 0:a.baseFeePerGas,u=t.id;return u===220||u===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(u===80002||u===137?s=await Ka(u):o!==null&&(s=o),s==null||c==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(s=ja(s,n),r=c*2n+s,(u===42220||u===44787||u===62320)&&(s=r),{maxFeePerGas:r,maxPriorityFeePerGas:s}))}function ja(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function Wa(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation.polygon.technology/amoy"}}const Za=31n;async function Ka(e){const t=Wa(e);try{const r=(await(await fetch(t)).json()).fast.maxPriorityFee;if(r>0){const s=Number.parseFloat(r).toFixed(9);return mt(s,9)}}catch(n){console.error("failed to fetch gas",n)}return Za}function Nn(e){var r;if(!e)return!1;const n=(typeof e=="string"?e:(e==null?void 0:e.message)||((r=e==null?void 0:e.data)==null?void 0:r.message)||"").toLowerCase();return n.includes("insufficient funds")||n.includes("insufficient balance")||n.includes("insufficient")&&(n.includes("native")||n.includes("gas"))||(e==null?void 0:e.code)==="INSUFFICIENT_FUNDS"||(e==null?void 0:e.reason)==="insufficient funds"}function Ya(e){var r;if(!e)return{message:"Unknown error"};const t=typeof e=="string"?e:(e==null?void 0:e.message)||((r=e==null?void 0:e.data)==null?void 0:r.message)||String(e);return{code:(e==null?void 0:e.code)||(e==null?void 0:e.reason),message:t}}async function $e(e){return qa({...e,action:"transaction:sent"})}function qa(e){return Wt({client:e.client,data:{action:e.action,chainId:e.chainId,clientId:e.client.clientId,contractAddress:e.contractAddress,errorCode:Q(e.error),functionName:e.functionName,gasPrice:e.gasPrice,transactionHash:e.transactionHash,walletAddress:e.walletAddress,walletType:e.walletType},ecosystem:e.ecosystem})}async function kn(e){var n,r,s;const t=Ya(e.error);return Wt({client:e.client,data:{action:"transaction:insufficient_funds",chainId:e.chainId,clientId:e.client.clientId,contractAddress:e.contractAddress,errorCode:t.code?Q(t.code):void 0,errorMessage:t.message,functionName:e.functionName,requiredAmount:(n=e.requiredAmount)==null?void 0:n.toString(),transactionValue:(r=e.transactionValue)==null?void 0:r.toString(),userBalance:(s=e.userBalance)==null?void 0:s.toString(),walletAddress:e.walletAddress},ecosystem:e.ecosystem})}async function Nt(e){var i;const{error:t,contract:n,fromAddress:r}=e;Nn(t)&&n&&kn({chainId:(i=n.chain)==null?void 0:i.id,client:n.client,contractAddress:n.address,error:t,walletAddress:r});const s=await Xa({contract:n,error:t});return s?new Ja(s,n):t}async function Xa(e){const{error:t,contract:n}=e;if(typeof t=="object"){const r=t;if(r.data&&r.data!=="0x"&&be(r.data)){let s=n==null?void 0:n.abi;n&&!s&&(s=await ma(n).catch(()=>{}));const i=Pn({abi:s,data:r.data});return`${i.errorName}${i.args?` - ${i.args}`:""}`}}return`Execution Reverted: ${js(t)}`}class Ja extends Error{constructor(t,n){var s;let r=t;super(r),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(s=n==null?void 0:n.chain)==null?void 0:s.id,this.message=r}}const Re=new WeakMap;async function Qa(e){var i,a;const t=typeof e.from=="string"?e.from??void 0:((i=e.from)==null?void 0:i.address)??((a=e.account)==null?void 0:a.address),n={...e.transaction,from:t};if(Re.has(n))return Re.get(n);const{account:r}=e,s=(async()=>{var b,w;const o=await A(e.transaction.gas);if(o!==void 0)return o;if(r!=null&&r.estimateGas)try{let y=await r.estimateGas(e.transaction);return(b=e.transaction.chain.experimental)!=null&&b.increaseZeroByteCount&&(y=fe(y)),y}catch(y){throw await Nt({contract:e.transaction.__contract,error:y,fromAddress:t})}const{encode:c}=await P(async()=>{const{encode:y}=await Promise.resolve().then(()=>to);return{encode:y}},void 0),[u,d,l,f]=await Promise.all([c(e.transaction),A(e.transaction.to),A(e.transaction.value),A(e.transaction.authorizationList)]),[{getRpcClient:p},{eth_estimateGas:h}]=await Promise.all([P(()=>import("./index-CUaBoBtD.js").then(y=>y.ae),__vite__mapDeps([1,2])),P(()=>import("./eth_estimateGas-D35SCROc.js"),__vite__mapDeps([5,1,2]))]),m=p(e.transaction);try{const y=qs({authorizationList:f==null?void 0:f.map(_=>({..._,address:L(_.address),nonce:Number(_.nonce),r:vt(_.r),s:vt(_.s)})),data:u,from:t?L(t):void 0,to:d?L(d):void 0,value:l});let g=await h(m,y);return(w=e.transaction.chain.experimental)!=null&&w.increaseZeroByteCount&&(g=fe(g)),g}catch(y){throw await Nt({contract:e.transaction.__contract,error:y,fromAddress:t})}})();return Re.set(n,s),s}function Vn(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="function")}async function q(e){const{contract:t,method:n,params:r}=e,s=async()=>{var l,f;if(Array.isArray(n))return n;if(Vn(n))return j(n);if(typeof n=="function")return j(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const p=Be(n);if(p.type==="function")return j(p);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((l=t.abi)==null?void 0:l.length)>0){const p=(f=t.abi)==null?void 0:f.find(h=>h.type==="function"&&h.name===n);if(p)return j(p)}throw new Error(`Could not resolve method "${n}".`)},[i,a]=await Promise.all([s(),typeof r=="function"?r():r]);let o;i[1].length===0?o=i[0]:o=i[0]+ft(i[1],a).slice(2);const c=se({chain:t.chain,client:t.client}),u=await Sa(c,{data:o,from:e.from?L(e.from):void 0,to:t.address}),d=Oe(i[2],u);return Array.isArray(d)&&d.length===1?d[0]:d}const ht=Object.freeze(Object.defineProperty({__proto__:null,readContract:q},Symbol.toStringTag,{value:"Module"})),Hn="0x0000000000000000000000000000000000000000",Sc=/^(.*)\[([0-9]*)\]$/,Gc=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,eo=2n**96n-1n,ze=new WeakMap;async function ae(e){if(ze.has(e))return ze.get(e);const t=(async()=>{const[n,r,{concatHex:s}]=await Promise.all([jn(e),Wn(e),P(()=>Promise.resolve().then(()=>Oo),void 0)]);return r?s([n,r]):n})();return ze.set(e,t),t}async function jn(e){if(e.data===void 0)return"0x";if(typeof e.data=="function"){const t=await e.data();return t||"0x"}return e.data}async function Wn(e){if(e.extraCallData){if(typeof e.extraCallData=="function"){const t=await e.extraCallData();if(!t)return;if(!t.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return t==="0x"?void 0:t}if(!e.extraCallData.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return e.extraCallData}}const to=Object.freeze(Object.defineProperty({__proto__:null,encode:ae,getDataFromTx:jn,getExtraCallDataFromTx:Wn},Symbol.toStringTag,{value:"Module"})),qe=new Map;function no(e){const t=qe.get(e);if(t)return t;const n=yr([]);return qe.set(e,n),n}function ro(e){const{address:t,transactionHash:n,chainId:r}=e,s=no(t);s.setValue([...s.getValue(),{chainId:r,transactionHash:n}]),qe.set(t,s)}async function gt(e){if(await Zt(e.transaction.chain)){const{getZkGasFees:m}=await P(async()=>{const{getZkGasFees:g}=await Promise.resolve().then(()=>Xn);return{getZkGasFees:g}},void 0),{gas:b,maxFeePerGas:w,maxPriorityFeePerGas:y}=await m({from:typeof e.from=="string"?L(e.from):e.from!==void 0?L(e.from.address):void 0,transaction:e.transaction});e.transaction={...e.transaction,gas:b,maxFeePerGas:w,maxPriorityFeePerGas:y}}const n=se(e.transaction),r=e.transaction.chain.id,s=e.from;let[i,a,o,c,u,d,l,f,p]=await Promise.all([ae(e.transaction),(async()=>{const m=await A(e.transaction.nonce);return m!==void 0?m:s?await P(async()=>{const{eth_getTransactionCount:b}=await import("./eth_getTransactionCount-C8MGy8Bo.js");return{eth_getTransactionCount:b}},__vite__mapDeps([6,1,2])).then(({eth_getTransactionCount:b})=>b(n,{address:typeof s=="string"?L(s):L(s.address),blockTag:"pending"})):void 0})(),Qa({...e,from:e.from}),Va(e.transaction),A(e.transaction.to),A(e.transaction.accessList),A(e.transaction.value),A(e.transaction.authorizationList),A(e.transaction.type)]);const h=await A(e.transaction.extraGas);return h&&(o+=h),{accessList:d,authorizationList:f,chainId:r,data:i,gas:o,nonce:a,to:u,type:p,value:l,...c}}async function so(e){let{account:t,transaction:n,gasless:r}=e;if(t.onTransactionRequested&&await t.onTransactionRequested(n),n.eip712){const{sendEip712Transaction:a}=await P(async()=>{const{sendEip712Transaction:o}=await Promise.resolve().then(()=>Xn);return{sendEip712Transaction:o}},void 0);return a({account:t,transaction:n})}const s=await gt({from:t,transaction:n});if(r){const{sendGaslessTransaction:a}=await P(async()=>{const{sendGaslessTransaction:o}=await import("./send-gasless-transaction-JDxRgPYC.js");return{sendGaslessTransaction:o}},__vite__mapDeps([7,1,2]));return a({account:t,gasless:r,serializableTransaction:s,transaction:n})}const i=await t.sendTransaction(s);return ro({address:t.address,chainId:n.chain.id,transactionHash:i.transactionHash}),{...i,chain:n.chain,client:n.client}}function io(e,t){return t&&(e.__preparedMethod=t.preparedMethod,e.__contract=t.contract),e}function ao(e){const t=e.domain;return(t==null?void 0:t.chainId)!==void 0&&mr(t.chainId)&&(e.domain={...e.domain,chainId:hr(e.domain.chainId)}),e}const oo="0xdd62ed3e",co=[{name:"owner",type:"address"},{name:"spender",type:"address"}],uo=[{type:"uint256"}];async function lo(e){return q({contract:e.contract,method:[oo,co,uo],params:[e.owner,e.spender]})}function xe(e){const{contract:t,method:n,params:r,...s}=e,i=()=>(async()=>{var a,o;if(Array.isArray(n))return n;if(Vn(n))return j(n);if(typeof n=="function")return j(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const c=Be(n);if(c.type==="function")return j(c);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((a=t.abi)==null?void 0:a.length)>0){const c=(o=t.abi)==null?void 0:o.find(u=>u.type==="function"&&u.name===n);if(c)return j(c)}throw new Error(`Could not resolve method "${n}".`)})();return io({...s,chain:t.chain,client:t.client,data:async()=>{let a;return Array.isArray(n)?a=n:a=await i(),a[1].length===0?a[0]:a[0]+ft(a[1],await A(r??[])).slice(2)},to:t.address},{contract:t,preparedMethod:i})}function Zn(e){let t;return()=>(t||(t=e()),t)}const fo="0x095ea7b3",po=[{name:"spender",type:"address"},{name:"value",type:"uint256"}],yo=[{type:"bool"}];function mo(e){const t=Zn(async()=>"asyncParams"in e?await e.asyncParams():e);return xe({accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},authorizationList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.authorizationList},contract:e.contract,erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},method:[fo,po,yo],nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},params:async()=>{const n=await t();return[n.spender,n.value]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value}})}function ho(e){return mo({asyncParams:async()=>{let t;if("amount"in e){const{decimals:n}=await P(async()=>{const{decimals:s}=await import("./decimals-DzEcqPLB.js");return{decimals:s}},__vite__mapDeps([8,1,2])),r=await n(e).catch(()=>18);t=mt(e.amount.toString(),r)}else t=e.amountWei;return{overrides:{erc20Value:{amountWei:t,tokenAddress:e.contract.address},...e.overrides},spender:e.spender,value:t}},contract:e.contract})}const go="0xf15d424e",bo=[{name:"signer",type:"address"}],wo=[{components:[{name:"signer",type:"address"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"startTimestamp",type:"uint128"},{name:"endTimestamp",type:"uint128"}],name:"permissions",type:"tuple"}];async function xo(e){return q({contract:e.contract,method:[go,bo,wo],params:[e.signer]})}const Ao="0x5892e236",Po=[{components:[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],name:"req",type:"tuple"},{name:"signature",type:"bytes"}],vo=[];function To(e){const t=Zn(async()=>"asyncParams"in e?await e.asyncParams():e);return xe({accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},authorizationList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.authorizationList},contract:e.contract,erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},method:[Ao,Po,vo],nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},params:async()=>{const n=await t();return[n.req,n.signature]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value}})}function le(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw new Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt(Ht(e)):BigInt(e)}const Xe=(e,t)=>typeof e=="bigint"?t(e):Array.isArray(e)?e.map(n=>Xe(n,t)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Xe(r,t)])):e;function kt(){return new Date(Date.now()+1e3*60*60*24*365*10)}function Ne(e){return le(Math.floor(e.getTime()/1e3))}const $o=[{name:"signer",type:"address"},{name:"isAdmin",type:"uint8"},{name:"approvedTargets",type:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256"},{name:"permissionStartTimestamp",type:"uint128"},{name:"permissionEndTimestamp",type:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}];async function Eo(e){const{account:t,contract:n,req:r}=e,s=await t.signTypedData({domain:{chainId:n.chain.id,name:"Account",verifyingContract:n.address,version:"1"},message:r,primaryType:"SignerPermissionRequest",types:{SignerPermissionRequest:$o}});return{req:r,signature:s}}async function Io(e){var r;const{target:t,permissions:n}=e;return{approvedTargets:n.approvedTargets==="*"?[Hn]:n.approvedTargets,isAdmin:0,nativeTokenLimitPerTransaction:Rn(((r=n.nativeTokenLimitPerTransaction)==null?void 0:r.toString())||"0"),permissionEndTimestamp:Ne(n.permissionEndTimestamp||kt()),permissionStartTimestamp:Ne(n.permissionStartTimestamp||new Date(0)),reqValidityEndTimestamp:Ne(kt()),reqValidityStartTimestamp:0n,signer:t,uid:await fa()}}function _o(e){const{contract:t,sessionKeyAddress:n,account:r,permissions:s}=e;return To({async asyncParams(){const{req:i,signature:a}=await Eo({account:r,contract:t,req:await Io({permissions:s,target:n})});return{req:i,signature:a}},contract:t})}async function So(e){var a;const{accountContract:t,sessionKeyAddress:n,newPermissions:r}=e;if(!await Kt(t))return!0;const i=await xo({contract:t,signer:n});return!!(i.endTimestamp&&i.endTimestamp<Math.floor(Date.now()/1e3)||!Go(i.approvedTargets,r.approvedTargets)||Rn(((a=r.nativeTokenLimitPerTransaction)==null?void 0:a.toString())??"0")>i.nativeTokenLimitPerTransaction)}function Go(e,t){return t==="*"&&e.length===1&&e[0]===Hn?!0:t!=="*"?t.map(n=>n.toLowerCase()).every(n=>e.map(r=>r.toLowerCase()).includes(n)):!1}async function Lo(e,t){return await e({method:"eth_sendRawTransaction",params:[t]})}function Kn(e){return J(...e)}const Oo=Object.freeze(Object.defineProperty({__proto__:null,concatHex:Kn},Symbol.toStringTag,{value:"Module"})),Yn=50000n,Bo=e=>{const t=Fo(e);return{domain:{chainId:e.chainId,name:"zkSync",version:"2"},message:t,primaryType:"Transaction",types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]}}};function Fo(e){const{gas:t,nonce:n,to:r,from:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:o,paymaster:c,paymasterInput:u,gasPerPubdata:d,data:l,factoryDeps:f}=e;return{data:l||"0x0",factoryDeps:(f==null?void 0:f.map(p=>$(oa(p))))??[],from:BigInt(s),gasLimit:t??0n,gasPerPubdataByteLimit:d??Yn,maxFeePerGas:a??0n,maxPriorityFeePerGas:o??0n,nonce:n?BigInt(n):0n,paymaster:c?BigInt(c):0n,paymasterInput:u||"0x",to:r?BigInt(r):0n,txType:113n,value:i??0n}}async function Uo(e){const{account:t,transaction:n}=e,r=await wt(e),s=await bt({account:t,chainId:n.chain.id,eip712Transaction:r}),i=se(n),a=await Lo(i,s);return{chain:n.chain,client:n.client,transactionHash:a}}async function bt(e){const{account:t,eip712Transaction:n,chainId:r}=e,s=Bo(n),i=await t.signTypedData({...s});return Co({...n,chainId:r,customSignature:i})}async function wt(e){const{account:t,transaction:n}=e,{gas:r,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPerPubdata:a}=await qn({from:L(t.address),transaction:n});return{...await gt({from:t.address,transaction:{...n,gas:r,maxFeePerGas:s,maxPriorityFeePerGas:i}}),...n.eip712,from:t.address,gasPerPubdata:a}}function Co(e){const{chainId:t,gas:n,nonce:r,to:s,from:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:d,paymaster:l,paymasterInput:f,gasPerPubdata:p,data:h}=e,m=[r?$(r):"0x",c?$(c):"0x",o?$(o):"0x",n?$(n):"0x",s??"0x",a?$(a):"0x",h??"0x0",$(t),$(""),$(""),$(t),i??"0x",p?$(p):$(Yn),d??[],u??"0x",l&&f?[l,f]:[]];return Kn(["0x71",Ws(m)])}async function qn(e){const{transaction:t,from:n}=e;let[r,s,i,a]=await Promise.all([A(t.gas),A(t.maxFeePerGas),A(t.maxPriorityFeePerGas),A(t.eip712)]),o=a==null?void 0:a.gasPerPubdata;if(r===void 0||s===void 0||i===void 0){const c=se(t),u=await Do({from:n,transaction:t}),d=await c({method:"zks_estimateFee",params:[Xe(u,$)]});r=le(d.gas_limit)*2n,s=le(d.max_fee_per_gas)*2n,i=le(d.max_priority_fee_per_gas)||1n,o=le(d.gas_per_pubdata_limit)*2n,o<50000n&&(o=50000n)}return{gas:r,gasPerPubdata:o,maxFeePerGas:s,maxPriorityFeePerGas:i}}async function Do(e){var c;const{transaction:t,from:n}=e,[r,s,i,a]=await Promise.all([ae(t),A(t.to),A(t.value),A(t.eip712)]),o=a==null?void 0:a.gasPerPubdata;return{data:r,eip712Meta:{...a,factoryDeps:(c=a==null?void 0:a.factoryDeps)==null?void 0:c.map(u=>Array.from(we(u))),gasPerPubdata:o||50000n},from:n,gasPerPubdata:o,to:s,type:"0x71",value:i}}const Xn=Object.freeze(Object.defineProperty({__proto__:null,getZkGasFees:qn,populateEip712Transaction:wt,sendEip712Transaction:Uo,signEip712Transaction:bt},Symbol.toStringTag,{value:"Module"})),Mo=2n**96n-1n;function Ro(e={}){return Mn({filters:e,signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}function zo(e={}){return Mn({filters:e,signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)"})}function No(e){const{receipt:t}=e,n={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,status:t.status,to:t.to?t.to:null,transactionHash:t.transactionHash,transactionIndex:t.transactionIndex,type:t.type};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),{...e,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce),receipt:n,userOpHash:e.userOpHash}}async function ko(e){const{factoryContract:t,predictAddressOverride:n,adminAddress:r,accountSalt:s,accountAddress:i}=e;if(n)return n(t,r);if(i)return i;if(!r)throw new Error("Account address is required to predict the smart wallet address.");return jt(async()=>{const a=s&&be(s)?s:et(s??"");let o,c=0;const u=3;for(;c<=u;)try{o=await q({contract:t,method:"function getAddress(address, bytes) returns (address)",params:[r,a]});break}catch(d){if(c===u)throw d;const l=2**(c+1)*200;await new Promise(f=>setTimeout(f,l)),c++}if(!o)throw new Error(`No smart account address found for admin address ${r} and salt ${s}`);return o},{cacheKey:`${e.factoryContract.chain.id}-${e.factoryContract.address}-${e.adminAddress}-${e.accountSalt}`,cacheTime:1e3*60*60*24})}function Jn(e){const{adminAddress:t,factoryContract:n,createAccountOverride:r,accountSalt:s}=e;if(r)return r(n,t);const i=s&&be(s)?s:et(s??"");return xe({contract:n,method:"function createAccount(address, bytes) returns (address)",params:[t,i]})}function Qn(e){const{accountContract:t,transaction:n,executeOverride:r}=e;if(r)return r(t,n);let s=n.value||0n;return(n.chainId===295||n.chainId===296)&&(s=BigInt(s)/BigInt(10**10)),xe({contract:t,gas:n.gas?n.gas+21000n:void 0,method:"function execute(address, uint256, bytes)",params:[n.to||"",s,n.data||"0x"]})}function Vo(e){var a;const{accountContract:t,transactions:n,executeBatchOverride:r}=e;if(r)return r(t,n);let s=n.map(o=>o.value||0n);const i=(a=n[0])==null?void 0:a.chainId;return(i===295||i===296)&&(s=s.map(o=>BigInt(o)/BigInt(10**10))),xe({contract:t,method:"function executeBatch(address[], uint256[], bytes[])",params:[n.map(o=>o.to||""),s,n.map(o=>o.data||"0x")]})}const Ho="0x35567e1a",jo=[{name:"sender",type:"address"},{name:"key",type:"uint192"}],Wo=[{name:"nonce",type:"uint256"}];async function Zo(e){return q({contract:e.contract,method:[Ho,jo,Wo],params:[e.sender,e.key]})}const Ko="0xa6193531",Yo=[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],qo=[{type:"bytes32"}];async function Xo(e){return q({contract:e.contract,method:[Ko,Yo,qo],params:[e.userOp]})}const Jo="0x22cdde4c",Qo=[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],ec=[{type:"bytes32"}];async function tc(e){return q({contract:e.contract,method:[Jo,Qo,ec],params:[e.userOp]})}function nc(e){return e.factory?O([e.factory,e.factoryData||"0x"]):"0x"}function rc(e){return O([S(Y(BigInt(e.verificationGasLimit)),{size:16}),S(Y(BigInt(e.callGasLimit)),{size:16})])}function sc(e){return O([S(Y(BigInt(e.maxPriorityFeePerGas)),{size:16}),S(Y(BigInt(e.maxFeePerGas)),{size:16})])}function ic(e){return e.paymaster?O([e.paymaster,S(Y(BigInt(e.paymasterVerificationGasLimit||0)),{size:16}),S(Y(BigInt(e.paymasterPostOpGasLimit||0)),{size:16}),e.paymasterData||"0x"]):"0x"}const ac=e=>({accountGasLimits:rc(e),callData:e.callData,gasFees:sc(e),initCode:nc(e),nonce:BigInt(e.nonce),paymasterAndData:ic(e),preVerificationGas:BigInt(e.preVerificationGas),sender:e.sender,signature:e.signature}),oc=()=>{const e=BigInt(Math.floor(Math.random()*4294967296)),t=BigInt(Math.floor(Math.random()*4294967296)),n=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),s=BigInt(Math.floor(Math.random()*4294967296)),i=BigInt(Math.floor(Math.random()*4294967296));return e<<BigInt(160)|t<<BigInt(128)|n<<BigInt(96)|r<<BigInt(64)|s<<BigInt(32)|i};function xt(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n==null||be(n)?n:$(n)]))}async function Ee(e){var h;const{userOp:t,paymasterOverride:n,client:r,chain:s,entrypointAddress:i}=e;if(n)return n(t);const a={"Content-Type":"application/json"},o=i??K,c=tt(s),u={id:1,jsonrpc:"2.0",method:"pm_sponsorUserOperation",params:[xt(t),o]},l=await _e(r)(c,{body:Q(u),headers:a,method:"POST"});if(!l.ok){const m=await l.text()||l.statusText;throw new Error(`Paymaster error: ${l.status} - ${m}`)}const f=await l.json();if(f.result)return typeof f.result=="string"?{paymasterAndData:f.result}:(f.result.reason&&console.warn(`Paymaster policy rejected this transaction with reason: ${f.result.reason} ${f.result.policyId?`(policyId: ${f.result.policyId})`:""}`),{callGasLimit:f.result.callGasLimit?E(f.result.callGasLimit):void 0,paymaster:f.result.paymaster,paymasterAndData:f.result.paymasterAndData,paymasterData:f.result.paymasterData,paymasterPostOpGasLimit:f.result.paymasterPostOpGasLimit?E(f.result.paymasterPostOpGasLimit):void 0,paymasterVerificationGasLimit:f.result.paymasterVerificationGasLimit?E(f.result.paymasterVerificationGasLimit):void 0,preVerificationGas:f.result.preVerificationGas?E(f.result.preVerificationGas):void 0,verificationGasLimit:f.result.verificationGasLimit?E(f.result.verificationGasLimit):void 0});const p=((h=f.error)==null?void 0:h.message)||f.error||l.statusText||"unknown error";throw new Error(`Paymaster error from ${c}: ${p}`)}const At=new Set,Pt=e=>`${e.chain.id}:${e.address}`,er=e=>{At.add(Pt(e))},tr=e=>{At.delete(Pt(e))},nr=e=>At.has(Pt(e));async function cc(e){const t=e.timeoutMs||12e4,n=e.intervalMs||1e3,r=Date.now()+t;for(;Date.now()<r;){const s=await wc(e);if(s)return s;await new Promise(i=>setTimeout(i,n))}throw new Error(`Timeout waiting for userOp to be mined on chain ${e.chain.id} with UserOp hash: ${e.userOpHash}`)}async function uc(e){var _;const{transaction:t,accountContract:n,factoryContract:r,adminAddress:s,overrides:i,sponsorGas:a,waitForDeployment:o=!0,isDeployedOverride:c}=e,u=t.chain,d=t.client,l={bundlerUrl:i==null?void 0:i.bundlerUrl,chain:u,client:d,entrypointAddress:i==null?void 0:i.entrypointAddress},f=nt(((_=e.overrides)==null?void 0:_.entrypointAddress)||K),[p,h,m,b,w]=await Promise.all([typeof c=="boolean"?c:Kt(n).then(B=>B||nr(n)),ae(t),A(t.gas),dc({bundlerOptions:l,chain:u,client:d,executeTx:t}),hc({accountContract:n,chain:u,client:d,entrypointAddress:i==null?void 0:i.entrypointAddress,getNonceOverride:i==null?void 0:i.getAccountNonce})]),{maxFeePerGas:y,maxPriorityFeePerGas:g}=b;return f==="v0.7"?lc({accountContract:n,adminAddress:s,bundlerOptions:l,callData:h,callGasLimit:m,factoryContract:r,isDeployed:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:w,overrides:i,sponsorGas:a,waitForDeployment:o}):fc({accountContract:n,adminAddress:s,bundlerOptions:l,callData:h,callGasLimit:m,factoryContract:r,isDeployed:p,maxFeePerGas:y,maxPriorityFeePerGas:g,nonce:w,overrides:i,sponsorGas:a,waitForDeployment:o})}async function dc(e){const{executeTx:t,bundlerOptions:n,chain:r,client:s}=e;let{maxFeePerGas:i,maxPriorityFeePerGas:a}=t;const o=(n==null?void 0:n.bundlerUrl)??tt(r);if(br(o)){const c=await bc({options:n});i=c.maxFeePerGas,a=c.maxPriorityFeePerGas}else{const[c,u]=await Promise.all([A(i),A(a)]);if(c&&u)i=c,a=u;else{const d=await zn(s,r);a=u??d.maxPriorityFeePerGas??0n,i=c??d.maxFeePerGas??0n}}return{maxFeePerGas:i,maxPriorityFeePerGas:a}}async function lc(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,callGasLimit:d,maxFeePerGas:l,maxPriorityFeePerGas:f,waitForDeployment:p}=e,{chain:h,client:m}=t;let b,w;n?(w="0x",p&&await rr(s)):(b=r.address,w=await ae(Jn({accountSalt:o==null?void 0:o.accountSalt,adminAddress:i,createAccountOverride:o==null?void 0:o.createAccount,factoryContract:r})),p&&er(s));const y={callData:u,callGasLimit:d??0n,factory:b,factoryData:w,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:c,paymaster:void 0,paymasterData:"0x",paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n,preVerificationGas:0n,sender:s.address,signature:Yt,verificationGasLimit:0n};if(a){const g=await Ee({chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster,userOp:y});if(g.paymaster&&g.paymasterData&&(y.paymaster=g.paymaster,y.paymasterData=g.paymasterData),g.callGasLimit&&g.verificationGasLimit&&g.preVerificationGas&&g.paymasterPostOpGasLimit&&g.paymasterVerificationGasLimit)y.callGasLimit=g.callGasLimit,y.verificationGasLimit=g.verificationGasLimit,y.preVerificationGas=g.preVerificationGas,y.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit,y.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit;else{const _=o!=null&&o.tokenPaymaster?{[o.tokenPaymaster.tokenAddress]:{stateDiff:{[wr(ft([{type:"address"},{type:"uint256"}],[s.address,o.tokenPaymaster.balanceStorageSlot]))]:$(eo,{size:32})}}}:void 0,B=await Ie({options:t,userOp:y},_);y.callGasLimit=B.callGasLimit,y.verificationGasLimit=B.verificationGasLimit,y.preVerificationGas=B.preVerificationGas,y.paymasterPostOpGasLimit=o!=null&&o.tokenPaymaster?500000n:B.paymasterPostOpGasLimit||0n,y.paymasterVerificationGasLimit=B.paymasterVerificationGasLimit||0n;const k=await Ee({chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster,userOp:y});k.paymaster&&k.paymasterData&&(y.paymaster=k.paymaster,y.paymasterData=k.paymasterData)}}else{const g=await Ie({options:t,userOp:y});y.callGasLimit=g.callGasLimit,y.verificationGasLimit=g.verificationGasLimit,y.preVerificationGas=g.preVerificationGas,y.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit||0n,y.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit||0n}return{...y,signature:"0x"}}async function fc(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,callGasLimit:d,maxFeePerGas:l,maxPriorityFeePerGas:f,waitForDeployment:p}=e,{chain:h,client:m}=t;let b;n?(b="0x",p&&await rr(s)):(b=await mc({accountSalt:o==null?void 0:o.accountSalt,adminAddress:i,createAccountOverride:o==null?void 0:o.createAccount,factoryContract:r}),p&&er(s));const w={callData:u,callGasLimit:d??0n,initCode:b,maxFeePerGas:l,maxPriorityFeePerGas:f,nonce:c,paymasterAndData:"0x",preVerificationGas:0n,sender:s.address,signature:Yt,verificationGasLimit:0n};if(a){const y=await Ee({chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster,userOp:w}),g="paymasterAndData"in y?y.paymasterAndData:"0x";if(g&&g!=="0x"&&(w.paymasterAndData=g),y.callGasLimit&&y.verificationGasLimit&&y.preVerificationGas)w.callGasLimit=y.callGasLimit,w.verificationGasLimit=y.verificationGasLimit,w.preVerificationGas=y.preVerificationGas;else{const _=await Ie({options:t,userOp:w});if(w.callGasLimit=_.callGasLimit,w.verificationGasLimit=_.verificationGasLimit,w.preVerificationGas=_.preVerificationGas,g&&g!=="0x"){const B=await Ee({chain:h,client:m,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster,userOp:w}),k="paymasterAndData"in B?B.paymasterAndData:"0x";k&&k!=="0x"&&(w.paymasterAndData=k)}}}else{const y=await Ie({options:t,userOp:w});w.callGasLimit=y.callGasLimit,w.verificationGasLimit=y.verificationGasLimit,w.preVerificationGas=y.preVerificationGas}return{...w,signature:"0x"}}async function pc(e){const{userOp:t,chain:n,entrypointAddress:r,adminAccount:s}=e,i=await yc({chain:n,client:e.client,entrypointAddress:r,userOp:t});if(s.signMessage){const a=await s.signMessage({chainId:n.id,message:{raw:gr(i)},originalMessage:Q(t)});return{...t,signature:a}}throw new Error("signMessage not implemented in signingAccount")}async function yc(e){const{userOp:t,chain:n,entrypointAddress:r}=e,s=nt(r||K);let i;if(s==="v0.7"){const a=ac(t);i=await tc({contract:M({address:r||qt,chain:n,client:e.client}),userOp:a})}else i=await Xo({contract:M({address:r||K,chain:n,client:e.client}),userOp:t});return i}async function mc(e){const{factoryContract:t,adminAddress:n,accountSalt:r,createAccountOverride:s}=e,i=Jn({accountSalt:r,adminAddress:n,createAccountOverride:s,factoryContract:t});return O([t.address,await ae(i)])}async function hc(e){const{accountContract:t,chain:n,client:r,entrypointAddress:s,getNonceOverride:i}=e;return i?i(t):await Zo({contract:M({address:s||K,chain:n,client:r}),key:oc(),sender:t.address})}async function rr(e){const t=Date.now();for(;nr(e);){if(Date.now()-t>6e4)throw tr(e),new Error("Account deployment is taking too long (over 1 minute). Please try again.");await new Promise(n=>setTimeout(n,500))}}async function gc(e){return oe({...e,operation:"eth_sendUserOperation",params:[xt(e.userOp),e.options.entrypointAddress??K]})}async function Ie(e,t){const n=await oe({...e,operation:"eth_estimateUserOperationGas",params:[xt(e.userOp),e.options.entrypointAddress??K,t??{}]});return{callGasLimit:E(n.callGasLimit)+xr,paymasterPostOpGasLimit:n.paymasterPostOpGasLimit!==void 0?E(n.paymasterPostOpGasLimit):void 0,paymasterVerificationGasLimit:n.paymasterVerificationGasLimit!==void 0?E(n.paymasterVerificationGasLimit):void 0,preVerificationGas:E(n.preVerificationGas),verificationGas:n.verificationGas!==void 0?E(n.verificationGas):void 0,verificationGasLimit:E(n.verificationGasLimit)}}async function bc(e){const t=await oe({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxFeePerGas:E(t.maxFeePerGas),maxPriorityFeePerGas:E(t.maxPriorityFeePerGas)}}async function wc(e){var n,r;const t=await xc(e);if(t){if(t.success===!1){const i=(r=(n=Ia({events:[Ro(),zo()],logs:t.logs})[0])==null?void 0:n.args)==null?void 0:r.revertReason;if(!i)throw new Error(`UserOp failed at txHash: ${t.receipt.transactionHash}`);const a=Pn({data:i});throw new Error(`UserOp failed with reason: '${a.args.join(",")}' at txHash: ${t.receipt.transactionHash}`)}return t.receipt}}async function xc(e){const t=await oe({operation:"eth_getUserOperationReceipt",options:e,params:[e.userOpHash]});if(t)return No(t)}async function Ac(e){const t=await oe({operation:"zk_paymasterData",options:e.options,params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function Pc(e){return{transactionHash:(await oe({operation:"zk_broadcastTransaction",options:e.options,params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function oe(e){const{options:t,operation:n,params:r}=e,s=t.bundlerUrl??tt(t.chain),a=await _e(t.client)(s,{useAuthToken:!0,body:Q({id:1,jsonrpc:"2.0",method:n,params:r}),headers:{"Content-Type":"application/json"},method:"POST"}),o=await a.json();if(!a.ok||o.error){let c=o.error||a.statusText;typeof c=="object"&&(c=Q(c));const u=o.code||"UNKNOWN";throw new Error(`${n} error: ${c}
Status: ${a.status}
Code: ${u}`)}return o.result}const sr=new WeakMap,Je=new WeakMap;async function vc(e,t){var f,p,h,m,b,w,y;const{personalAccount:n,client:r}=e;if(!n)throw new Error("No personal account provided for smart account connection");const s=t,i=t.chain,a="gasless"in s?s.gasless:s.sponsorGas;if(await Zt(i))return[Ic({chain:i,connectionOptions:e,creationOptions:t,sponsorGas:a}),i];if(s.factoryAddress&&!((f=s.overrides)!=null&&f.entrypointAddress)){const g=await ir(s.factoryAddress,r,i);g&&(s.overrides={...s.overrides,entrypointAddress:g})}(p=s.overrides)!=null&&p.tokenPaymaster&&!((h=s.overrides)!=null&&h.entrypointAddress)&&(s.overrides={...s.overrides,entrypointAddress:qt});const o=s.factoryAddress??Ar((m=s.overrides)==null?void 0:m.entrypointAddress),c=M({address:o,chain:i,client:r}),u=await ko({accountAddress:(b=s.overrides)==null?void 0:b.accountAddress,accountSalt:(w=s.overrides)==null?void 0:w.accountSalt,adminAddress:n.address,factoryContract:c,predictAddressOverride:(y=s.overrides)==null?void 0:y.predictAddress}).then(g=>g).catch(g=>{throw new Error(`Failed to get account address with factory contract ${c.address} on chain ID ${i.id}: ${(g==null?void 0:g.message)||"unknown error"}`,{cause:g})}),d=M({address:u,chain:i,client:r}),l=await $c({...s,accountContract:d,chain:i,client:r,factoryContract:c,personalAccount:n,sponsorGas:a});if(sr.set(n,l),Je.set(l,n),s.sessionKey&&await So({accountContract:d,newPermissions:s.sessionKey.permissions,sessionKeyAddress:s.sessionKey.address})){const g=_o({account:n,contract:d,permissions:s.sessionKey.permissions,sessionKeyAddress:s.sessionKey.address});await so({account:l,transaction:g})}return[l,i]}async function Tc(e){const t=Je.get(e);t&&(sr.delete(t),Je.delete(e))}async function $c(e){var i,a;const t=(i=e.overrides)==null?void 0:i.tokenPaymaster;if(t&&nt(((a=e.overrides)==null?void 0:a.entrypointAddress)||K)!=="v0.7")throw new Error("Token paymaster is only supported for entrypoint version v0.7");const n=e.sponsorGas;let r=e.accountContract;const s={address:L(r.address),async onTransactionRequested(o){var c,u;return(u=(c=e.personalAccount).onTransactionRequested)==null?void 0:u.call(c,o)},async sendBatchTransaction(o){var f,p;const c=Vo({accountContract:r,executeBatchOverride:(f=e.overrides)==null?void 0:f.executeBatch,transactions:o});if(o.length===0)throw new Error("No transactions to send");const u=o[0];if(!u)throw new Error("No transactions to send");const d=Pe(u.chainId),l=await Qe({executeTx:c,options:{...e,accountContract:r,chain:d}});return $e({chainId:d.id,client:e.client,contractAddress:((p=o[0])==null?void 0:p.to)??void 0,transactionHash:l.transactionHash,walletAddress:e.accountContract.address,walletType:"smart"}),l},async sendTransaction(o){var f,p,h;let c;if(t){await Ec({accountContract:r,erc20Paymaster:t,options:e});const m=async()=>({paymaster:t.paymasterAddress,paymasterData:"0x"});c=((f=e.overrides)==null?void 0:f.paymaster)||m}else c=(p=e.overrides)==null?void 0:p.paymaster;o.chainId!==r.chain.id&&(r=M({address:s.address,chain:Pe(o.chainId),client:e.client}));const u=Qn({accountContract:r,executeOverride:(h=e.overrides)==null?void 0:h.execute,transaction:o}),d=Pe(o.chainId),l=await Qe({executeTx:u,options:{...e,accountContract:r,chain:d,overrides:{...e.overrides,paymaster:c}}});return $e({chainId:d.id,client:e.client,contractAddress:o.to??void 0,transactionHash:l.transactionHash,walletAddress:e.accountContract.address,walletType:"smart"}),l},async signMessage({message:o}){var u;if((u=e.overrides)!=null&&u.signMessage)return e.overrides.signMessage({accountContract:r,adminAccount:e.personalAccount,factoryContract:e.factoryContract,message:o});const{smartAccountSignMessage:c}=await P(async()=>{const{smartAccountSignMessage:d}=await import("./signing-DI0PEnLR.js");return{smartAccountSignMessage:d}},__vite__mapDeps([9,1,2]));return c({accountContract:r,factoryContract:e.factoryContract,message:o,options:e})},async signTypedData(o){var u;if((u=e.overrides)!=null&&u.signTypedData)return e.overrides.signTypedData({accountContract:r,adminAccount:e.personalAccount,factoryContract:e.factoryContract,typedData:o});const{smartAccountSignTypedData:c}=await P(async()=>{const{smartAccountSignTypedData:d}=await import("./signing-DI0PEnLR.js");return{smartAccountSignTypedData:d}},__vite__mapDeps([9,1,2]));return c({accountContract:r,factoryContract:e.factoryContract,options:e,typedData:o})},sendCalls:async o=>{const{inAppWalletSendCalls:c}=await P(async()=>{const{inAppWalletSendCalls:p}=await import("./in-app-wallet-calls-BqbZ3JwA.js");return{inAppWalletSendCalls:p}},__vite__mapDeps([10,1,2])),u=o.calls[0];if(!u)throw new Error("No calls to send");const d=u.client,l=u.chain||o.chain,f=await c({account:s,calls:o.calls,chain:l});return{chain:l,client:d,id:f}},getCallsStatus:async o=>{const{inAppWalletGetCallsStatus:c}=await P(async()=>{const{inAppWalletGetCallsStatus:u}=await import("./in-app-wallet-calls-BqbZ3JwA.js");return{inAppWalletGetCallsStatus:u}},__vite__mapDeps([10,1,2]));return c(o)},getCapabilities:async o=>({[o.chainId??1]:{atomic:{status:"supported"},paymasterService:{supported:n??!1}}})};return s}async function Ec(e){var d;const{accountContract:t,erc20Paymaster:n,options:r}=e,s=n.tokenAddress,i=M({address:s,chain:t.chain,client:t.client});if(await lo({contract:i,owner:t.address,spender:n.paymasterAddress})>0n)return;const o=ho({amountWei:Mo-1n,contract:i,spender:n.paymasterAddress}),c=await gt({from:t.address,transaction:o}),u=Qn({accountContract:t,executeOverride:(d=r.overrides)==null?void 0:d.execute,transaction:c});await Qe({executeTx:u,options:{...r,overrides:{...r.overrides,tokenPaymaster:void 0}}})}function Ic(e){const{creationOptions:t,connectionOptions:n,chain:r}=e,s={address:L(n.personalAccount.address),async onTransactionRequested(i){var a,o;return(o=(a=n.personalAccount).onTransactionRequested)==null?void 0:o.call(a,i)},async sendTransaction(i){var d,l,f,p;const a={chain:Pe(i.chainId),client:n.client,data:i.data,eip712:i.eip712,to:i.to??void 0,value:i.value??0n};let o=await wt({account:s,transaction:a});if(e.sponsorGas&&!o.paymaster){const h=await Ac({options:{bundlerUrl:(d=t.overrides)==null?void 0:d.bundlerUrl,chain:r,client:n.client,entrypointAddress:(l=t.overrides)==null?void 0:l.entrypointAddress},transaction:o});o={...o,...h}}const c=await bt({account:s,chainId:r.id,eip712Transaction:o}),u=await Pc({options:{bundlerUrl:(f=t.overrides)==null?void 0:f.bundlerUrl,chain:r,client:n.client,entrypointAddress:(p=t.overrides)==null?void 0:p.entrypointAddress},signedTransaction:c,transaction:o});return $e({chainId:r.id,client:n.client,contractAddress:i.to??void 0,transactionHash:u.transactionHash,walletAddress:s.address,walletType:"smart"}),{chain:r,client:n.client,transactionHash:u.transactionHash}},async signMessage({message:i}){return n.personalAccount.signMessage({message:i})},async signTypedData(i){const a=ao(i);return n.personalAccount.signTypedData(a)},sendCalls:async i=>{const{inAppWalletSendCalls:a}=await P(async()=>{const{inAppWalletSendCalls:l}=await import("./in-app-wallet-calls-BqbZ3JwA.js");return{inAppWalletSendCalls:l}},__vite__mapDeps([10,1,2])),o=i.calls[0];if(!o)throw new Error("No calls to send");const c=o.client,u=o.chain||i.chain,d=await a({account:s,calls:i.calls,chain:u});return{chain:u,client:c,id:d}},getCallsStatus:async i=>{const{inAppWalletGetCallsStatus:a}=await P(async()=>{const{inAppWalletGetCallsStatus:o}=await import("./in-app-wallet-calls-BqbZ3JwA.js");return{inAppWalletGetCallsStatus:o}},__vite__mapDeps([10,1,2]));return a(i)},getCapabilities:async i=>({[i.chainId??1]:{atomic:{status:"unsupported"},paymasterService:{supported:e.sponsorGas??!1}}})};return s}async function Qe(e){var r,s,i;const{executeTx:t,options:n}=e;try{const a=await uc({accountContract:n.accountContract,adminAddress:n.personalAccount.address,factoryContract:n.factoryContract,overrides:n.overrides,sponsorGas:n.sponsorGas,transaction:t}),o=await pc({adminAccount:n.personalAccount,chain:n.chain,client:n.client,entrypointAddress:(r=n.overrides)==null?void 0:r.entrypointAddress,userOp:a}),c={bundlerUrl:(s=n.overrides)==null?void 0:s.bundlerUrl,chain:n.chain,client:n.client,entrypointAddress:(i=n.overrides)==null?void 0:i.entrypointAddress},u=await gc({options:c,userOp:o}),d=await cc({...c,userOpHash:u});return $e({chainId:n.chain.id,client:n.client,contractAddress:await A(t.to??void 0),transactionHash:d.transactionHash,walletAddress:n.accountContract.address,walletType:"smart"}),{chain:n.chain,client:n.client,transactionHash:d.transactionHash}}catch(a){throw Nn(a)&&kn({chainId:n.chain.id,client:n.client,contractAddress:await A(t.to??void 0),error:a,transactionValue:await A(t.value),walletAddress:n.accountContract.address}),a}finally{tr(n.accountContract)}}async function ir(e,t,n){const r=M({address:e,chain:n,client:t});try{return await q({contract:r,method:"function entrypoint() public view returns (address)"})}catch{return}}const Oc=Object.freeze(Object.defineProperty({__proto__:null,connectSmartAccount:vc,disconnectSmartAccount:Tc,getEntrypointFromFactory:ir,isSmartWallet:Pr},Symbol.toStringTag,{value:"Module"}));export{Hn as Z,Sc as a,Gc as b,Kn as c,ae as d,ft as e,A as f,fa as g,ro as h,Lc as i,xs as j,Oc as k,Jn as p,q as r,so as s};
